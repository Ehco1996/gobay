bus: &bus
  broker_url: "amqp://guest:guest@127.0.0.1:5672/"
  reconnect_delay: "2s"
  reinit_delay: "1s"
  exhanges:
    - sbay-exchange
  queues:
    - test
  resend_delay: "1s"
  publish_retry: 3
  prefetch: 10
  quit_consumer_on_empty_queue: false
  bindings:
    - exchange: sbay-exchange
      queue: test
      binding_key: buses.oc.post_order_paid
stub_health: &stub_health
  host: '127.0.0.1'
  port: 5555
  authority: 'health-rpc.xyz'
  metadata:
    svc_auth_token: 'abcdefg'
  conntimeout: 1s
  calltimeout: 300ms
  retrybackoff: 50ms
  retrytimes: 3

asynctask: &asynctask
  concurrency: 10
  broker: "redis://127.0.0.1:6379/8"
  default_queue: "gobay.task"
  result_backend: "redis://127.0.0.1:6379/8"
  results_expire_in: 1
  redis: {}

defaults: &defaults
  db_driver: sqlite3
  db_url: ":memory:"
  short_url_alphabet: "mn6j2c4rv8bpygw95z7hsdaetxuk3fq"
  asynctask:
    <<: *asynctask
  bus:
    <<: *bus
  sentry:
    dsn: "http://user:pass@127.0.0.1/5"
    environment: "default"
    repanic: true
  stub_health:
    <<: *stub_health
  cache_backend: "memory"
  cache_prefix: "github"
  cache_host: "127.0.0.1:6379"
  cache_password: ""
  cache_db: 3
testing:
  <<: *defaults
  bus:
    <<: *bus
  stub_health:
    <<: *stub_health
  ent:
    db_driver: mysql
    db_url: "root:@(127.0.0.1:3306)/gobay?charset=utf8mb4&parseTime=true"
grpclong:
  <<: *defaults
  bus:
    <<: *bus
  stub_health:
    <<: *stub_health
    retrybackoff: 300ms
grpcnoretry:
  <<: *defaults
  bus:
    <<: *bus
  stub_health:
    <<: *stub_health
    retrytimes: 0
grpcmocked:
  <<: *defaults
  bus:
    <<: *bus
  stub_health:
    <<: *stub_health
    mocked: true
development:
  <<: *defaults
  stub_health:
    <<: *stub_health
production:
  <<: *defaults
  stub_health:
    <<: *stub_health
